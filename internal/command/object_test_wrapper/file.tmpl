// Code generated by http://github.com/khevse/codegen(version:{{ .appInfo.Version }}; commit:{{ .appInfo.Commit }}; build:{{ .appInfo.BuildAt }}). DO NOT EDIT.

package {{.package}}

import(
    "testing"
    minimock "github.com/gojuno/minimock/v3"
{{- range .imports }}
    {{.Alias}} "{{ .Path }}"
{{- end}}
)

// {{ .objectSpec.Name }} mocks
type {{.objectSpec.Name}}Mocks struct{
{{- range .objectSpec.Fields }}
{{- if ne .MockTypeName "" }}
{{if eq .MockPackage "" }} {{ .Name }} *{{ .MockTypeName }} {{ else }}  {{ .Name }} *{{.MockPackage}}.{{.MockTypeName}}{{end }}
{{- end }}
{{- end}}
}

// New{{.objectSpec.Name}}Mocks return object {{.objectSpec.Name}}Mocks
func New{{.objectSpec.Name}}Mocks(t *testing.T) *{{.objectSpec.Name}}Mocks {
    mc := minimock.NewController(t)

    return &{{.objectSpec.Name}}Mocks{
        {{- range .objectSpec.Fields }}
        {{- if ne .MockTypeName "" }}
        {{if eq .MockPackage "" }} {{ .Name }} : New{{ .MockTypeName }}(mc), {{ else }}  {{ .Name }}: {{.MockPackage}}.New{{.MockTypeName}}(mc), {{end }}
        {{- end }}
        {{- end}}
    }
}

{{ if .objectSpec.Comment}} /* {{ .objectSpec.Comment  }} */ {{ end }}
type {{.objectSpec.Name}} struct{
    mocks {{.objectSpec.Name}}Mocks
    base {{ .objectSpec.BaseObjectTypeName }}
{{ range .objectSpec.Fields }}
{{- if eq .MockTypeName "" }} {{ .Name }} {{ .TypeName }} {{- end }}
{{ end}}
}

{{ range .objectSpec.Methods }}
{{- if .Comment}} /* {{ .Comment  }} */{{- end}}
func (w *{{$.objectSpec.Name}}) {{ .Name }}({{- range $fieldIdx, $field := .Params }}{{ if eq $fieldIdx 0 }}{{ else }},{{ end }}{{ $field.FuncSpecName }} {{ $field.TypeName }}{{- end}})({{- range $fieldIdx, $field := .Results }}{{ if eq $fieldIdx 0 }}{{ else }},{{ end }}{{ $field.FuncSpecName }} {{ $field.TypeName }}{{- end}}) {
    existsMock := false {{- range .Results }}{{ if ne .MockTypeName "" }} ||{{printf "\n"}} w.mocks.{{ .ObjectSpecName }} != nil {{ end }} {{- end}}
    if existsMock {
        return {{- range $fieldIdx, $field := .Results }}{{ if eq $fieldIdx 0 }}{{ else }},{{ end }} {{ if eq $field.MockTypeName "" }} w.{{ $field.ObjectSpecName }} {{ else }} w.mocks.{{ $field.ObjectSpecName }} {{ end }} {{- end}}
    }

    return w.base.{{ .Name }}({{- range $fieldIdx, $field := .Params }}{{ if eq $fieldIdx 0 }}{{ else }},{{ end }}{{ $field.FuncSpecName }}{{- end}})
}
{{ end}}


// {{ .objectSpec.Name }}Builder wrapper builder
type {{.objectSpec.Name}}Builder struct{
    object {{.objectSpec.Name}}
}

// SetBase set the base object with default behavior
func (b *{{.objectSpec.Name}}Builder) SetBase(val {{ .objectSpec.BaseObjectTypeName }}) *{{.objectSpec.Name}}Builder{
    b.object.base = val
    return b
}

// GetWrapper return wrapper object
func (b *{{.objectSpec.Name}}Builder) GetWrapper() *{{.objectSpec.Name}}{
    return &b.object
}

// SetAllMocks set all mocks objects
func (b *{{.objectSpec.Name}}Builder) SetAllMocks(val *{{.objectSpec.Name}}Mocks) *{{.objectSpec.Name}}Builder {
    {{- range .objectSpec.Fields }}
    {{- if ne .MockTypeName "" }}
    b.Set{{ .Name }}Mock(val)
    {{- end }}
    {{- end}}

    return b
}

{{- range .objectSpec.Fields }}
{{- if ne .MockTypeName "" }}
// Set{{ .Name }}Mock set mock object
func (b *{{$.objectSpec.Name}}Builder) Set{{ .Name }}Mock(val *{{$.objectSpec.Name}}Mocks) *{{$.objectSpec.Name}}Builder {
    b.object.mocks.{{ .Name }} = val.{{ .Name }}
    return b
}
{{- end }}
{{- end}}